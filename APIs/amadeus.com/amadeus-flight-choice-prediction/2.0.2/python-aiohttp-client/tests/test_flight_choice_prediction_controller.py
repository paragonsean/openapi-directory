# coding: utf-8

import pytest
import json
from aiohttp import web

from openapi_server.models.error400 import Error400
from openapi_server.models.error500 import Error500
from openapi_server.models.flight_offers_search_reply import FlightOffersSearchReply
from openapi_server.models.success import Success


pytestmark = pytest.mark.asyncio

@pytest.mark.skip("Connexion does not support multiple consumes. See https://github.com/zalando/connexion/pull/760")
async def test_get_flight_choice_predict(client):
    """Test case for get_flight_choice_predict

    Predict the choice of flight offers.
    """
    body = {"data":[{"id":"1","instantTicketingRequired":False,"itineraries":[{"duration":"PT15H55M","segments":[{"aircraft":{"code":"788"},"arrival":{"at":"2020-08-02T13:10:00","iataCode":"LHR","terminal":"5"},"blacklistedInEU":False,"carrierCode":"BA","departure":{"at":"2020-08-01T21:50:00","iataCode":"GIG","terminal":"2"},"duration":"PT11H20M","id":"1","number":"248","numberOfStops":0,"operating":{"carrierCode":"BA"}},{"aircraft":{"code":"321"},"arrival":{"at":"2020-08-02T18:45:00","iataCode":"MAD","terminal":"4S"},"blacklistedInEU":False,"carrierCode":"BA","departure":{"at":"2020-08-02T15:15:00","iataCode":"LHR","terminal":"5"},"duration":"PT2H30M","id":"2","number":"462","numberOfStops":0,"operating":{"carrierCode":"BA"}}]},{"duration":"PT13H35M","segments":[{"aircraft":{"code":"346"},"arrival":{"at":"2020-08-06T05:40:00","iataCode":"GRU","terminal":"3"},"blacklistedInEU":False,"carrierCode":"IB","departure":{"at":"2020-08-05T23:55:00","iataCode":"MAD","terminal":"4S"},"duration":"PT10H45M","id":"5","number":"6827","numberOfStops":0,"operating":{"carrierCode":"IB"}},{"aircraft":{"code":"320"},"arrival":{"at":"2020-08-06T08:30:00","iataCode":"GIG","terminal":"2"},"blacklistedInEU":False,"carrierCode":"LA","departure":{"at":"2020-08-06T07:30:00","iataCode":"GRU","terminal":"2"},"duration":"PT1H","id":"6","number":"4508","numberOfStops":0}]}],"lastTicketingDate":"2020-01-16","nonHomogeneous":False,"numberOfBookableSeats":7,"oneWay":False,"price":{"base":"3661.00","currency":"USD","fees":[{"amount":"0.00","type":"SUPPLIER"},{"amount":"0.00","type":"TICKETING"}],"grandTotal":"3842.10","total":"3842.10"},"pricingOptions":{"fareType":["PUBLISHED"],"includedCheckedBagsOnly":False},"source":"GDS","travelerPricings":[{"fareDetailsBySegment":[{"brandedFare":"BUSINESS","cabin":"BUSINESS","class":"R","fareBasis":"RNNZ60S3","includedCheckedBags":{"quantity":2},"segmentId":"1"},{"brandedFare":"BUSINESS","cabin":"BUSINESS","class":"J","fareBasis":"RNNZ60S3","includedCheckedBags":{"quantity":2},"segmentId":"2"},{"brandedFare":"BAGSEAT","cabin":"ECONOMY","class":"V","fareBasis":"VDH0NNM3","includedCheckedBags":{"quantity":1},"segmentId":"5"},{"brandedFare":"BAGSEAT","cabin":"ECONOMY","class":"V","fareBasis":"VDH0NNM3","includedCheckedBags":{"quantity":1},"segmentId":"6"}],"fareOption":"STANDARD","price":{"base":"2088.00","currency":"USD","total":"2178.55"},"travelerId":"1","travelerType":"ADULT"},{"fareDetailsBySegment":[{"brandedFare":"BUSINESS","cabin":"BUSINESS","class":"R","fareBasis":"RNNZ60S3","segmentId":"1"},{"brandedFare":"BUSINESS","cabin":"BUSINESS","class":"J","fareBasis":"RNNZ60S3","segmentId":"2"},{"brandedFare":"BAGSEAT","cabin":"ECONOMY","class":"V","fareBasis":"VDH0NNM3","segmentId":"5"},{"brandedFare":"BAGSEAT","cabin":"ECONOMY","class":"V","fareBasis":"VDH0NNM3","segmentId":"6"}],"fareOption":"STANDARD","price":{"base":"1573.00","currency":"USD","total":"1663.55"},"travelerId":"2","travelerType":"CHILD"}],"type":"flight-offer","validatingAirlineCodes":["BA"]},{"id":"2","instantTicketingRequired":False,"itineraries":[{"duration":"PT15H55M","segments":[{"aircraft":{"code":"788"},"arrival":{"at":"2020-08-02T13:10:00","iataCode":"LHR","terminal":"5"},"blacklistedInEU":False,"carrierCode":"BA","departure":{"at":"2020-08-01T21:50:00","iataCode":"GIG","terminal":"2"},"duration":"PT11H20M","id":"1","number":"248","numberOfStops":0,"operating":{"carrierCode":"BA"}},{"aircraft":{"code":"321"},"arrival":{"at":"2020-08-02T18:45:00","iataCode":"MAD","terminal":"4S"},"blacklistedInEU":False,"carrierCode":"BA","departure":{"at":"2020-08-02T15:15:00","iataCode":"LHR","terminal":"5"},"duration":"PT2H30M","id":"2","number":"462","numberOfStops":0,"operating":{"carrierCode":"BA"}}]},{"duration":"PT19H5M","segments":[{"aircraft":{"code":"346"},"arrival":{"at":"2020-08-06T05:40:00","iataCode":"GRU","terminal":"3"},"blacklistedInEU":False,"carrierCode":"IB","departure":{"at":"2020-08-05T23:55:00","iataCode":"MAD","terminal":"4S"},"duration":"PT10H45M","id":"3","number":"6827","numberOfStops":0,"operating":{"carrierCode":"IB"}},{"aircraft":{"code":"321"},"arrival":{"at":"2020-08-06T14:00:00","iataCode":"GIG","terminal":"2"},"blacklistedInEU":False,"carrierCode":"LA","departure":{"at":"2020-08-06T13:00:00","iataCode":"GRU","terminal":"2"},"duration":"PT1H","id":"4","number":"4537","numberOfStops":0}]}],"lastTicketingDate":"2020-01-16","nonHomogeneous":False,"numberOfBookableSeats":7,"oneWay":False,"price":{"base":"3661.00","currency":"USD","fees":[{"amount":"0.00","type":"SUPPLIER"},{"amount":"0.00","type":"TICKETING"}],"grandTotal":"3842.10","total":"3842.10"},"pricingOptions":{"fareType":["PUBLISHED"],"includedCheckedBagsOnly":False},"source":"GDS","travelerPricings":[{"fareDetailsBySegment":[{"brandedFare":"BUSINESS","cabin":"BUSINESS","class":"R","fareBasis":"RNNZ60S3","includedCheckedBags":{"quantity":2},"segmentId":"1"},{"brandedFare":"BUSINESS","cabin":"BUSINESS","class":"J","fareBasis":"RNNZ60S3","includedCheckedBags":{"quantity":2},"segmentId":"2"},{"brandedFare":"BAGSEAT","cabin":"ECONOMY","class":"V","fareBasis":"VDH0NNM3","includedCheckedBags":{"quantity":1},"segmentId":"3"},{"brandedFare":"BAGSEAT","cabin":"ECONOMY","class":"V","fareBasis":"VDH0NNM3","includedCheckedBags":{"quantity":1},"segmentId":"4"}],"fareOption":"STANDARD","price":{"base":"2088.00","currency":"USD","total":"2178.55"},"travelerId":"1","travelerType":"ADULT"},{"fareDetailsBySegment":[{"brandedFare":"BUSINESS","cabin":"BUSINESS","class":"R","fareBasis":"RNNZ60S3","segmentId":"1"},{"brandedFare":"BUSINESS","cabin":"BUSINESS","class":"J","fareBasis":"RNNZ60S3","segmentId":"2"},{"brandedFare":"BAGSEAT","cabin":"ECONOMY","class":"V","fareBasis":"VDH0NNM3","segmentId":"3"},{"brandedFare":"BAGSEAT","cabin":"ECONOMY","class":"V","fareBasis":"VDH0NNM3","segmentId":"4"}],"fareOption":"STANDARD","price":{"base":"1573.00","currency":"USD","total":"1663.55"},"travelerId":"2","travelerType":"CHILD"}],"type":"flight-offer","validatingAirlineCodes":["BA"]}],"dictionaries":{"aircraft":{"320":"AIRBUS INDUSTRIE A320-100/200","321":"AIRBUS INDUSTRIE A321","346":"AIRBUS INDUSTRIE A340-600","788":"BOEING 787-8"},"carriers":{"BA":"BRITISH AIRWAYS","IB":"IBERIA","LA":"LATAM AIRLINES GROUP"},"currencies":{"USD":"US DOLLAR"},"locations":{"GIG":{"cityCode":"RIO","countryCode":"BR"},"GRU":{"cityCode":"SAO","countryCode":"BR"},"LHR":{"cityCode":"LON","countryCode":"GB"},"MAD":{"cityCode":"MAD","countryCode":"ES"}}},"meta":{"count":2}}
    headers = { 
        'Accept': 'application/json',
        'Content-Type': 'application/vnd.amadeus+json',
        'x_http_method_override': 'GET',
    }
    response = await client.request(
        method='POST',
        path='/v2/shopping/flight-offers/prediction',
        headers=headers,
        json=body,
        )
    assert response.status == 200, 'Response body is : ' + (await response.read()).decode('utf-8')

