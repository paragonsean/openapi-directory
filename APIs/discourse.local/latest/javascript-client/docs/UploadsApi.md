# DiscourseApiDocumentation.UploadsApi

All URIs are relative to *http://discourse.local*

Method | HTTP request | Description
------------- | ------------- | -------------
[**abortMultipart**](UploadsApi.md#abortMultipart) | **POST** /uploads/abort-multipart.json | Abort multipart upload
[**batchPresignMultipartParts**](UploadsApi.md#batchPresignMultipartParts) | **POST** /uploads/batch-presign-multipart-parts.json | Generates batches of presigned URLs for multipart parts
[**completeExternalUpload**](UploadsApi.md#completeExternalUpload) | **POST** /uploads/complete-external-upload.json | Completes a direct external upload
[**completeMultipart**](UploadsApi.md#completeMultipart) | **POST** /uploads/complete-multipart.json | Complete multipart upload
[**createMultipartUpload**](UploadsApi.md#createMultipartUpload) | **POST** /uploads/create-multipart.json | Creates a multipart external upload
[**createUpload**](UploadsApi.md#createUpload) | **POST** /uploads.json | Creates an upload
[**generatePresignedPut**](UploadsApi.md#generatePresignedPut) | **POST** /uploads/generate-presigned-put.json | Initiates a direct external upload



## abortMultipart

> DeleteGroup200Response abortMultipart(opts)

Abort multipart upload

This endpoint aborts the multipart upload initiated with /create-multipart. This should be used when cancelling the upload. It does not matter if parts were already uploaded into the external storage provider.  You must have the correct permissions and CORS settings configured in your external provider. We support AWS S3 as the default. See:  https://meta.discourse.org/t/-/210469#s3-multipart-direct-uploads-4.  An external file store must be set up and &#x60;enable_direct_s3_uploads&#x60; must be set to true for this endpoint to function.  

### Example

```javascript
import DiscourseApiDocumentation from 'discourse_api_documentation';

let apiInstance = new DiscourseApiDocumentation.UploadsApi();
let opts = {
  'abortMultipartRequest': new DiscourseApiDocumentation.AbortMultipartRequest() // AbortMultipartRequest | 
};
apiInstance.abortMultipart(opts, (error, data, response) => {
  if (error) {
    console.error(error);
  } else {
    console.log('API called successfully. Returned data: ' + data);
  }
});
```

### Parameters


Name | Type | Description  | Notes
------------- | ------------- | ------------- | -------------
 **abortMultipartRequest** | [**AbortMultipartRequest**](AbortMultipartRequest.md)|  | [optional] 

### Return type

[**DeleteGroup200Response**](DeleteGroup200Response.md)

### Authorization

No authorization required

### HTTP request headers

- **Content-Type**: application/json
- **Accept**: application/json


## batchPresignMultipartParts

> BatchPresignMultipartParts200Response batchPresignMultipartParts(opts)

Generates batches of presigned URLs for multipart parts

Multipart uploads are uploaded in chunks or parts to individual presigned URLs, similar to the one generated by /generate-presigned-put. The part numbers provided must be between 1 and 10000. The total number of parts will depend on the chunk size in bytes that you intend to use to upload each chunk. For example a 12MB file may have 2 5MB chunks and a final 2MB chunk, for part numbers 1, 2, and 3.  This endpoint will return a presigned URL for each part number provided, which you can then use to send PUT requests for the binary chunk corresponding to that part. When the part is uploaded, the provider should return an ETag for the part, and this should be stored along with the part number, because this is needed to complete the multipart upload.  You must have the correct permissions and CORS settings configured in your external provider. We support AWS S3 as the default. See:  https://meta.discourse.org/t/-/210469#s3-multipart-direct-uploads-4.  An external file store must be set up and &#x60;enable_direct_s3_uploads&#x60; must be set to true for this endpoint to function.  

### Example

```javascript
import DiscourseApiDocumentation from 'discourse_api_documentation';

let apiInstance = new DiscourseApiDocumentation.UploadsApi();
let opts = {
  'batchPresignMultipartPartsRequest': new DiscourseApiDocumentation.BatchPresignMultipartPartsRequest() // BatchPresignMultipartPartsRequest | 
};
apiInstance.batchPresignMultipartParts(opts, (error, data, response) => {
  if (error) {
    console.error(error);
  } else {
    console.log('API called successfully. Returned data: ' + data);
  }
});
```

### Parameters


Name | Type | Description  | Notes
------------- | ------------- | ------------- | -------------
 **batchPresignMultipartPartsRequest** | [**BatchPresignMultipartPartsRequest**](BatchPresignMultipartPartsRequest.md)|  | [optional] 

### Return type

[**BatchPresignMultipartParts200Response**](BatchPresignMultipartParts200Response.md)

### Authorization

No authorization required

### HTTP request headers

- **Content-Type**: application/json
- **Accept**: application/json


## completeExternalUpload

> CreateUpload200Response completeExternalUpload(opts)

Completes a direct external upload

Completes an external upload initialized with /get-presigned-put. The file will be moved from its temporary location in external storage to a final destination in the S3 bucket. An Upload record will also be created in the database in most cases.  If a sha1-checksum was provided in the initial request it will also be compared with the uploaded file in storage to make sure the same file was uploaded. The file size will be compared for the same reason.  You must have the correct permissions and CORS settings configured in your external provider. We support AWS S3 as the default. See:  https://meta.discourse.org/t/-/210469#s3-multipart-direct-uploads-4.  An external file store must be set up and &#x60;enable_direct_s3_uploads&#x60; must be set to true for this endpoint to function.  

### Example

```javascript
import DiscourseApiDocumentation from 'discourse_api_documentation';

let apiInstance = new DiscourseApiDocumentation.UploadsApi();
let opts = {
  'completeExternalUploadRequest': new DiscourseApiDocumentation.CompleteExternalUploadRequest() // CompleteExternalUploadRequest | 
};
apiInstance.completeExternalUpload(opts, (error, data, response) => {
  if (error) {
    console.error(error);
  } else {
    console.log('API called successfully. Returned data: ' + data);
  }
});
```

### Parameters


Name | Type | Description  | Notes
------------- | ------------- | ------------- | -------------
 **completeExternalUploadRequest** | [**CompleteExternalUploadRequest**](CompleteExternalUploadRequest.md)|  | [optional] 

### Return type

[**CreateUpload200Response**](CreateUpload200Response.md)

### Authorization

No authorization required

### HTTP request headers

- **Content-Type**: application/json
- **Accept**: application/json


## completeMultipart

> CreateUpload200Response completeMultipart(opts)

Complete multipart upload

Completes the multipart upload in the external store, and copies the file from its temporary location to its final location in the store. All of the parts must have been uploaded to the external storage provider. An Upload record will be completed in most cases once the file is copied to its final location.  You must have the correct permissions and CORS settings configured in your external provider. We support AWS S3 as the default. See:  https://meta.discourse.org/t/-/210469#s3-multipart-direct-uploads-4.  An external file store must be set up and &#x60;enable_direct_s3_uploads&#x60; must be set to true for this endpoint to function.  

### Example

```javascript
import DiscourseApiDocumentation from 'discourse_api_documentation';

let apiInstance = new DiscourseApiDocumentation.UploadsApi();
let opts = {
  'completeMultipartRequest': new DiscourseApiDocumentation.CompleteMultipartRequest() // CompleteMultipartRequest | 
};
apiInstance.completeMultipart(opts, (error, data, response) => {
  if (error) {
    console.error(error);
  } else {
    console.log('API called successfully. Returned data: ' + data);
  }
});
```

### Parameters


Name | Type | Description  | Notes
------------- | ------------- | ------------- | -------------
 **completeMultipartRequest** | [**CompleteMultipartRequest**](CompleteMultipartRequest.md)|  | [optional] 

### Return type

[**CreateUpload200Response**](CreateUpload200Response.md)

### Authorization

No authorization required

### HTTP request headers

- **Content-Type**: application/json
- **Accept**: application/json


## createMultipartUpload

> CreateMultipartUpload200Response createMultipartUpload(opts)

Creates a multipart external upload

Creates a multipart upload in the external storage provider, storing a temporary reference to the external upload similar to /get-presigned-put.  You must have the correct permissions and CORS settings configured in your external provider. We support AWS S3 as the default. See:  https://meta.discourse.org/t/-/210469#s3-multipart-direct-uploads-4.  An external file store must be set up and &#x60;enable_direct_s3_uploads&#x60; must be set to true for this endpoint to function.  

### Example

```javascript
import DiscourseApiDocumentation from 'discourse_api_documentation';

let apiInstance = new DiscourseApiDocumentation.UploadsApi();
let opts = {
  'createMultipartUploadRequest': new DiscourseApiDocumentation.CreateMultipartUploadRequest() // CreateMultipartUploadRequest | 
};
apiInstance.createMultipartUpload(opts, (error, data, response) => {
  if (error) {
    console.error(error);
  } else {
    console.log('API called successfully. Returned data: ' + data);
  }
});
```

### Parameters


Name | Type | Description  | Notes
------------- | ------------- | ------------- | -------------
 **createMultipartUploadRequest** | [**CreateMultipartUploadRequest**](CreateMultipartUploadRequest.md)|  | [optional] 

### Return type

[**CreateMultipartUpload200Response**](CreateMultipartUpload200Response.md)

### Authorization

No authorization required

### HTTP request headers

- **Content-Type**: application/json
- **Accept**: application/json


## createUpload

> CreateUpload200Response createUpload(type, opts)

Creates an upload

### Example

```javascript
import DiscourseApiDocumentation from 'discourse_api_documentation';

let apiInstance = new DiscourseApiDocumentation.UploadsApi();
let type = "type_example"; // String | 
let opts = {
  'file': null, // Object | 
  'synchronous': true, // Boolean | Use this flag to return an id and url
  'userId': 56 // Number | required if uploading an avatar
};
apiInstance.createUpload(type, opts, (error, data, response) => {
  if (error) {
    console.error(error);
  } else {
    console.log('API called successfully. Returned data: ' + data);
  }
});
```

### Parameters


Name | Type | Description  | Notes
------------- | ------------- | ------------- | -------------
 **type** | **String**|  | 
 **file** | [**Object**](Object.md)|  | [optional] 
 **synchronous** | **Boolean**| Use this flag to return an id and url | [optional] 
 **userId** | **Number**| required if uploading an avatar | [optional] 

### Return type

[**CreateUpload200Response**](CreateUpload200Response.md)

### Authorization

No authorization required

### HTTP request headers

- **Content-Type**: multipart/form-data
- **Accept**: application/json


## generatePresignedPut

> GeneratePresignedPut200Response generatePresignedPut(opts)

Initiates a direct external upload

Direct external uploads bypass the usual method of creating uploads via the POST /uploads route, and upload directly to an external provider, which by default is S3. This route begins the process, and will return a unique identifier for the external upload as well as a presigned URL which is where the file binary blob should be uploaded to.  Once the upload is complete to the external service, you must call the POST /complete-external-upload route using the unique identifier returned by this route, which will create any required Upload record in the Discourse database and also move file from its temporary location to the final destination in the external storage service.  You must have the correct permissions and CORS settings configured in your external provider. We support AWS S3 as the default. See:  https://meta.discourse.org/t/-/210469#s3-multipart-direct-uploads-4.  An external file store must be set up and &#x60;enable_direct_s3_uploads&#x60; must be set to true for this endpoint to function.  

### Example

```javascript
import DiscourseApiDocumentation from 'discourse_api_documentation';

let apiInstance = new DiscourseApiDocumentation.UploadsApi();
let opts = {
  'generatePresignedPutRequest': new DiscourseApiDocumentation.GeneratePresignedPutRequest() // GeneratePresignedPutRequest | 
};
apiInstance.generatePresignedPut(opts, (error, data, response) => {
  if (error) {
    console.error(error);
  } else {
    console.log('API called successfully. Returned data: ' + data);
  }
});
```

### Parameters


Name | Type | Description  | Notes
------------- | ------------- | ------------- | -------------
 **generatePresignedPutRequest** | [**GeneratePresignedPutRequest**](GeneratePresignedPutRequest.md)|  | [optional] 

### Return type

[**GeneratePresignedPut200Response**](GeneratePresignedPut200Response.md)

### Authorization

No authorization required

### HTTP request headers

- **Content-Type**: application/json
- **Accept**: application/json

