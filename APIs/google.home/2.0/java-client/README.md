# openapi-java-client

Google Home
- API version: 2.0
  - Build date: 2024-10-12T09:56:31.661536-04:00[America/New_York]
  - Generator version: 7.9.0

# Google Home Local API
This is an unofficial documentation of the local API used by the Home app to communicate with GH devices.
[GitHub Repo](https://github.com/rithvikvibhu/GHLocalApi)

[![GitHub stars](https://img.shields.io/github/stars/rithvikvibhu/GHLocalApi)](https://github.com/rithvikvibhu/GHLocalApi/stargazers) [![GitHub license](https://img.shields.io/github/license/rithvikvibhu/GHLocalApi)](https://github.com/rithvikvibhu/GHLocalApi/blob/master/LICENSE.md)

## Getting Started

Requests must be made over HTTPS, port 8443, so the base URL for these endpoints is: `https://<google-home-ip>:8443/setup/`

Get the IP of Google Home from the Google Home app (Device Settings -> End of the list) or from your router.

GET requests are simple, in the browser kind.  
POST requests need to set the header (when there's a body): `content-type: application/json`

## Authentication

Since June 2019, most requests (with exceptions like `/setup/eureka_info`) need a local authorization token.

There are 3 kinds of tokens involved here:

### Local Authorization Token
This token must be sent in all requests in the header `cast-local-authorization-token`. It is short-lived (~1 day) and may change unexpectedly (with a sync, change in homegraph, etc.)
##### Get this token
- With access to an android device, [get this token directly by either method](https://gist.github.com/rithvikvibhu/1a0f4937af957ef6a78453e3be482c1f).
- Without a device, or to integrate it with a script, use an access token to get the homegraph and extract the token. To get an access token, read the next section. Check the example section for more info.

### Access Token
This is a standard google oauth2 access token. It is in the form `ya29.***`.
This gives access to the Google Home Foyer API. These expire in an hour.
Use this to get the homegraph (and then the local authorization token above).
##### Get this token
To get this access token, either a Google account username/password or a Google Master Token is needed. More info in the gist.
Use the script [from this gist](https://gist.github.com/rithvikvibhu/952f83ea656c6782fbd0f1645059055d).

### Master Token
This is in the form `aas_et/_***` and can be used to request access tokens.
##### Get this token
The same [script in the gist](https://gist.github.com/rithvikvibhu/952f83ea656c6782fbd0f1645059055d) that gets the access token can also get the master token. Needs Google account creds.

## Example

Here's the whole flow from just a pair of username/password to using the local API.

Prerequisites:
- [grpcurl](https://github.com/fullstorydev/grpcurl)
- [Proto files](https://drive.google.com/drive/folders/1RvnN3y-G23pd2SWHmfV_7sef8QU5GNF4?usp=sharing) (preserve folder structure)

### 1. Get an access token with the script
- Download get_tokens.py
- Fill in username and password
```sh
python3 get_tokens.py
# Note down the access token printed.
```

### 2. Use the access token and get home graph
- This prints the json and uses jq to parse and filter out the fields deviceName and localAuthToken
- This will give a list of all devices and their local auth tokens
```sh
./grpcurl -H 'authorization: Bearer ya29.a0Af****' \\
 -import-path /path/to/protos \\
 -proto /path/to/protos/google/internal/home/foyer/v1.proto \\
 googlehomefoyer-pa.googleapis.com:443 \\
 google.internal.home.foyer.v1.StructuresService/GetHomeGraph | jq '.home.devices[] | {deviceName, localAuthToken}'
# Note down the local auth token for the device you want.
```

### 3. Make the call to the local device using the local auth token
```sh
curl -H \"cast-local-authorization-token: LOCAL_AUTH_TOKEN\" --verbose --insecure https://192.168.0.18:8443/setup/bluetooth/status
```


*Automatically generated by the [OpenAPI Generator](https://openapi-generator.tech)*


## Requirements

Building the API client library requires:
1. Java 1.8+
2. Maven (3.8.3+)/Gradle (7.2+)

## Installation

To install the API client library to your local Maven repository, simply execute:

```shell
mvn clean install
```

To deploy it to a remote Maven repository instead, configure the settings of the repository and execute:

```shell
mvn clean deploy
```

Refer to the [OSSRH Guide](http://central.sonatype.org/pages/ossrh-guide.html) for more information.

### Maven users

Add this dependency to your project's POM:

```xml
<dependency>
  <groupId>org.openapitools</groupId>
  <artifactId>openapi-java-client</artifactId>
  <version>2.0</version>
  <scope>compile</scope>
</dependency>
```

### Gradle users

Add this dependency to your project's build file:

```groovy
  repositories {
    mavenCentral()     // Needed if the 'openapi-java-client' jar has been published to maven central.
    mavenLocal()       // Needed if the 'openapi-java-client' jar has been published to the local maven repo.
  }

  dependencies {
     implementation "org.openapitools:openapi-java-client:2.0"
  }
```

### Others

At first generate the JAR by executing:

```shell
mvn clean package
```

Then manually install the following JARs:

* `target/openapi-java-client-2.0.jar`
* `target/lib/*.jar`

## Getting Started

Please follow the [installation](#installation) instruction and execute the following Java code:

```java

// Import classes:
import org.openapitools.client.ApiClient;
import org.openapitools.client.ApiException;
import org.openapitools.client.Configuration;
import org.openapitools.client.auth.*;
import org.openapitools.client.model.*;
import org.openapitools.client.api.AssistantApi;

public class Example {
  public static void main(String[] args) {
    ApiClient defaultClient = Configuration.getDefaultApiClient();
    defaultClient.setBasePath("http://example.com/setup");
    
    // Configure API key authorization: cast-local-authorization-token
    ApiKeyAuth cast-local-authorization-token = (ApiKeyAuth) defaultClient.getAuthentication("cast-local-authorization-token");
    cast-local-authorization-token.setApiKey("YOUR API KEY");
    // Uncomment the following line to set a prefix for the API key, e.g. "Token" (defaults to null)
    //cast-local-authorization-token.setApiKeyPrefix("Token");

    AssistantApi apiInstance = new AssistantApi(defaultClient);
    AccessibilityRequest accessibilityRequest = new AccessibilityRequest(); // AccessibilityRequest | 
    try {
      Getcurrentvalues result = apiInstance.accessibility(accessibilityRequest);
      System.out.println(result);
    } catch (ApiException e) {
      System.err.println("Exception when calling AssistantApi#accessibility");
      System.err.println("Status code: " + e.getCode());
      System.err.println("Reason: " + e.getResponseBody());
      System.err.println("Response headers: " + e.getResponseHeaders());
      e.printStackTrace();
    }
  }
}

```

## Documentation for API Endpoints

All URIs are relative to *http://example.com/setup*

Class | Method | HTTP request | Description
------------ | ------------- | ------------- | -------------
*AssistantApi* | [**accessibility**](docs/AssistantApi.md#accessibility) | **POST** /assistant/a11y_mode | Accessibility
*AssistantApi* | [**alarmVolume**](docs/AssistantApi.md#alarmVolume) | **POST** /assistant/alarms/volume | Alarm Volume
*AssistantApi* | [**deleteAlarmsandTimers**](docs/AssistantApi.md#deleteAlarmsandTimers) | **POST** /assistant/alarms/delete | Delete Alarms and Timers
*AssistantApi* | [**doNotDisturb**](docs/AssistantApi.md#doNotDisturb) | **POST** /assistant/notifications | Do Not Disturb
*AssistantApi* | [**getAlarmsandTimers**](docs/AssistantApi.md#getAlarmsandTimers) | **GET** /assistant/alarms | Get Alarms and Timers
*AssistantApi* | [**setEqualizerValues**](docs/AssistantApi.md#setEqualizerValues) | **POST** /user_eq/set_equalizer | Set Equalizer Values
*BluetoothApi* | [**changeDiscoverability**](docs/BluetoothApi.md#changeDiscoverability) | **POST** /bluetooth/discovery | Change Discoverability
*BluetoothApi* | [**forgetpaireddevice**](docs/BluetoothApi.md#forgetpaireddevice) | **POST** /bluetooth/bond | Forget paired device
*BluetoothApi* | [**getPairedDevices**](docs/BluetoothApi.md#getPairedDevices) | **GET** /bluetooth/get_bonded | Get Paired Devices
*BluetoothApi* | [**getScanResults**](docs/BluetoothApi.md#getScanResults) | **GET** /bluetooth/scan_results | Get Scan Results
*BluetoothApi* | [**pairwithSpeaker**](docs/BluetoothApi.md#pairwithSpeaker) | **POST** /bluetooth/connect | Pair with Speaker
*BluetoothApi* | [**scanfordevices**](docs/BluetoothApi.md#scanfordevices) | **POST** /bluetooth/scan | Scan for devices
*BluetoothApi* | [**status**](docs/BluetoothApi.md#status) | **GET** /bluetooth/status | Status
*DeviceInfoApi* | [**appDeviceID**](docs/DeviceInfoApi.md#appDeviceID) | **POST** /get_app_device_id | App Device ID
*DeviceInfoApi* | [**checkReadyStatus**](docs/DeviceInfoApi.md#checkReadyStatus) | **POST** /assistant/check_ready_status | Check Ready Status
*DeviceInfoApi* | [**eurekaInfo**](docs/DeviceInfoApi.md#eurekaInfo) | **GET** /eureka_info | Eureka Info
*DeviceInfoApi* | [**locales**](docs/DeviceInfoApi.md#locales) | **GET** /supported_locales | Locales
*DeviceInfoApi* | [**offer**](docs/DeviceInfoApi.md#offer) | **GET** /offer | Offer
*DeviceInfoApi* | [**testInternetDownloadSpeed**](docs/DeviceInfoApi.md#testInternetDownloadSpeed) | **POST** /test_internet_download_speed | Test Internet Download Speed
*DeviceInfoApi* | [**timezones**](docs/DeviceInfoApi.md#timezones) | **GET** /supported_timezones | Timezones
*DeviceSettingsApi* | [**nightModesettings**](docs/DeviceSettingsApi.md#nightModesettings) | **POST** /assistant/set_night_mode_params | Night Mode settings
*DeviceSettingsApi* | [**rebootandFactoryReset**](docs/DeviceSettingsApi.md#rebootandFactoryReset) | **POST** /reboot | Reboot and Factory Reset
*DeviceSettingsApi* | [**setEurekaInfo**](docs/DeviceSettingsApi.md#setEurekaInfo) | **POST** /set_eureka_info | Set Eureka Info
*StaticFilesApi* | [**chromecastIcon**](docs/StaticFilesApi.md#chromecastIcon) | **GET** /icon.png | Chromecast Icon
*StaticFilesApi* | [**legalNotice**](docs/StaticFilesApi.md#legalNotice) | **GET** /NOTICE.html.gz | Legal Notice
*WifiApi* | [**connecttoWiFiNetwork**](docs/WifiApi.md#connecttoWiFiNetwork) | **POST** /connect_wifi | Connect to Wi-Fi Network
*WifiApi* | [**forgetWiFiNetwork**](docs/WifiApi.md#forgetWiFiNetwork) | **POST** /forget_wifi | Forget Wi-Fi Network
*WifiApi* | [**getSavedNetworks**](docs/WifiApi.md#getSavedNetworks) | **GET** /configured_networks | Get Saved Networks
*WifiApi* | [**getWiFiScanResults**](docs/WifiApi.md#getWiFiScanResults) | **GET** /scan_results | Get Wi-Fi Scan Results
*WifiApi* | [**scanforNetworks**](docs/WifiApi.md#scanforNetworks) | **POST** /scan_wifi | Scan for Networks


## Documentation for Models

 - [AccessibilityRequest](docs/AccessibilityRequest.md)
 - [Alarm](docs/Alarm.md)
 - [AlarmVolumeRequest](docs/AlarmVolumeRequest.md)
 - [Aogh](docs/Aogh.md)
 - [AppDeviceIDRequest](docs/AppDeviceIDRequest.md)
 - [Audio](docs/Audio.md)
 - [BuildInfo](docs/BuildInfo.md)
 - [Capabilities](docs/Capabilities.md)
 - [ChangeDiscoverabilityRequest](docs/ChangeDiscoverabilityRequest.md)
 - [CheckReadyStatusRequest](docs/CheckReadyStatusRequest.md)
 - [ConnectedDevice](docs/ConnectedDevice.md)
 - [ConnecttoWiFiNetworkRequest](docs/ConnecttoWiFiNetworkRequest.md)
 - [DatePattern](docs/DatePattern.md)
 - [DeleteAlarmsandTimersRequest](docs/DeleteAlarmsandTimersRequest.md)
 - [Detail](docs/Detail.md)
 - [Device](docs/Device.md)
 - [DeviceInfo](docs/DeviceInfo.md)
 - [Example1](docs/Example1.md)
 - [Example11](docs/Example11.md)
 - [Example110](docs/Example110.md)
 - [Example111](docs/Example111.md)
 - [Example112](docs/Example112.md)
 - [Example113](docs/Example113.md)
 - [Example114](docs/Example114.md)
 - [Example12](docs/Example12.md)
 - [Example13](docs/Example13.md)
 - [Example14](docs/Example14.md)
 - [Example15](docs/Example15.md)
 - [Example16](docs/Example16.md)
 - [Example17](docs/Example17.md)
 - [Example18](docs/Example18.md)
 - [Example19](docs/Example19.md)
 - [ForgetWiFiNetworkRequest](docs/ForgetWiFiNetworkRequest.md)
 - [ForgetpaireddeviceRequest](docs/ForgetpaireddeviceRequest.md)
 - [Getcurrentstate](docs/Getcurrentstate.md)
 - [Getcurrentvalues](docs/Getcurrentvalues.md)
 - [Getvolume](docs/Getvolume.md)
 - [HighShelf](docs/HighShelf.md)
 - [HighShelf1](docs/HighShelf1.md)
 - [IconList](docs/IconList.md)
 - [Locale](docs/Locale.md)
 - [LowShelf](docs/LowShelf.md)
 - [LowShelf1](docs/LowShelf1.md)
 - [Multizone](docs/Multizone.md)
 - [Net](docs/Net.md)
 - [NightModeParams](docs/NightModeParams.md)
 - [NightModesettingsRequest](docs/NightModesettingsRequest.md)
 - [Opencast](docs/Opencast.md)
 - [OptIn](docs/OptIn.md)
 - [OptIn1](docs/OptIn1.md)
 - [PairwithSpeakerRequest](docs/PairwithSpeakerRequest.md)
 - [Proxy](docs/Proxy.md)
 - [RebootandFactoryResetRequest](docs/RebootandFactoryResetRequest.md)
 - [RemoteSink](docs/RemoteSink.md)
 - [ScanfordevicesRequest](docs/ScanfordevicesRequest.md)
 - [SetEqualizerValuesRequest](docs/SetEqualizerValuesRequest.md)
 - [SetEurekaInfoRequest](docs/SetEurekaInfoRequest.md)
 - [Settings](docs/Settings.md)
 - [Settings1](docs/Settings1.md)
 - [Setup](docs/Setup.md)
 - [Sign](docs/Sign.md)
 - [Stats](docs/Stats.md)
 - [TestInternetDownloadSpeedRequest](docs/TestInternetDownloadSpeedRequest.md)
 - [TimePattern](docs/TimePattern.md)
 - [Timer](docs/Timer.md)
 - [Timezone](docs/Timezone.md)
 - [UserEq](docs/UserEq.md)
 - [Wifi](docs/Wifi.md)
 - [Window](docs/Window.md)
 - [Window2](docs/Window2.md)


<a id="documentation-for-authorization"></a>
## Documentation for Authorization


Authentication schemes defined for the API:
<a id="cast-local-authorization-token"></a>
### cast-local-authorization-token

- **Type**: API key
- **API key parameter name**: cast-local-authorization-token
- **Location**: HTTP header


## Recommendation

It's recommended to create an instance of `ApiClient` per thread in a multithreaded environment to avoid any potential issues.

## Author



