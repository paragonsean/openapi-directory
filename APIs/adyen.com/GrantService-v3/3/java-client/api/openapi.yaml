openapi: 3.1.0
info:
  contact:
    name: Adyen Developer Experience team
    url: https://github.com/Adyen/adyen-openapi
    x-twitter: Adyen
  description: |+
    Adyen Capital allows you to build an embedded financing offering for your users to serve their operational needs. Learn more about [Adyen Capital](https://docs.adyen.com/marketplaces-and-platforms/capital).

    ## Authentication
    Your Adyen contact will provide your API credential and an API key. To connect to the API, add an `X-API-Key` header with the API key as the value, for example:

     ```
    curl
    -H "Content-Type: application/json" \
    -H "X-API-Key: YOUR_API_KEY" \
    ...
    ```

    Alternatively, you can use the username and password to connect to the API using basic authentication. For example:

    ```
    curl
    -H "Content-Type: application/json" \
    -U "ws@BalancePlatform.YOUR_BALANCE_PLATFORM":"YOUR_WS_PASSWORD" \
    ...
    ```
    ## Roles and permissions
    To use the Capital API, you need an additional role for your API credential. Your Adyen contact will set up the roles and permissions for you.
    ## Versioning
    The Capital API supports [versioning](https://docs.adyen.com/development-resources/versioning) using a version suffix in the endpoint URL. This suffix has the following format: "vXX", where XX is the version number.

    For example:
    ```
    https://balanceplatform-api-test.adyen.com/btl/v3/grants
    ```
    ## Going live
    When going live, your Adyen contact will provide your API credential for the live environment. You can then use the username and password to send requests to `https://balanceplatform-api-live.adyen.com/btl/v3`.

  termsOfService: https://www.adyen.com/legal/terms-and-conditions
  title: Capital API
  version: "3"
  x-apisguru-categories:
  - payment
  x-logo:
    url: https://twitter.com/Adyen/profile_image?size=original
  x-origin:
  - format: openapi
    url: https://raw.githubusercontent.com/Adyen/adyen-openapi/main/json/GrantService-v3.json
    version: "3.1"
  x-providerName: adyen.com
  x-publicVersion: true
  x-serviceName: GrantService-v3
  x-timestamp: 2023-06-05T19:25:44Z
servers:
- url: https://balanceplatform-api-test.adyen.com/btl/v3
tags:
- name: Capital
paths:
  /grants:
    get:
      description: Returns a list of grants with status and outstanding balances.
      operationId: get-grants
      parameters:
      - description: The counterparty account holder id.
        explode: true
        in: query
        name: counterpartyAccountHolderId
        required: false
        schema:
          type: string
        style: form
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CapitalGrants'
          description: OK - the request has succeeded.
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RestServiceError'
          description: Bad Request - a problem reading or understanding the request.
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RestServiceError'
          description: Unauthorized - authentication required.
        "403":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RestServiceError'
          description: Forbidden - insufficient permissions to process the request.
        "404":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RestServiceError'
          description: Not Found - the payment was not found
        "422":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RestServiceError'
          description: Unprocessable Entity - a request validation error.
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RestServiceError'
          description: Internal Server Error - the server could not process the request.
      security:
      - BasicAuth: []
      - ApiKeyAuth: []
      summary: Get a capital account
      tags:
      - Capital
      x-addedInVersion: "3"
      x-groupName: Capital
      x-methodName: getCapitalAccount
      x-sortIndex: 2
      x-accepts:
      - application/json
    post:
      description: Requests the payout of the selected grant offer.
      operationId: post-grants
      requestBody:
        content:
          application/json:
            examples:
              requestGrant:
                $ref: '#/components/examples/post-grants-requestGrant'
            schema:
              $ref: '#/components/schemas/CapitalGrantInfo'
      responses:
        "200":
          content:
            application/json:
              examples:
                requestGrant:
                  $ref: '#/components/examples/post-grants-requestGrant-200'
              schema:
                $ref: '#/components/schemas/CapitalGrant'
          description: OK - the request has succeeded.
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RestServiceError'
          description: Bad Request - a problem reading or understanding the request.
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RestServiceError'
          description: Unauthorized - authentication required.
        "403":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RestServiceError'
          description: Forbidden - insufficient permissions to process the request.
        "404":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RestServiceError'
          description: Not Found - the payment was not found
        "422":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RestServiceError'
          description: Unprocessable Entity - a request validation error.
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RestServiceError'
          description: Internal Server Error - the server could not process the request.
      security:
      - BasicAuth: []
      - ApiKeyAuth: []
      summary: Request a grant payout
      tags:
      - Capital
      x-addedInVersion: "3"
      x-groupName: Capital
      x-methodName: requestGrantPayout
      x-sortIndex: 1
      x-content-type: application/json
      x-accepts:
      - application/json
  /grants/{id}:
    get:
      description: Returns the details of a capital account specified in the path.
      operationId: get-grants-id
      parameters:
      - description: The unique identifier of the grant.
        explode: false
        in: path
        name: id
        required: true
        schema:
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CapitalGrant'
          description: OK - the request has succeeded.
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RestServiceError'
          description: Bad Request - a problem reading or understanding the request.
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RestServiceError'
          description: Unauthorized - authentication required.
        "403":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RestServiceError'
          description: Forbidden - insufficient permissions to process the request.
        "404":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RestServiceError'
          description: Not Found - the payment was not found
        "422":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RestServiceError'
          description: Unprocessable Entity - a request validation error.
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RestServiceError'
          description: Internal Server Error - the server could not process the request.
      security:
      - BasicAuth: []
      - ApiKeyAuth: []
      summary: Get grant reference details
      tags:
      - Capital
      x-addedInVersion: "3"
      x-groupName: Capital
      x-methodName: getGrantReferenceDetails
      x-sortIndex: 3
      x-accepts:
      - application/json
components:
  examples:
    post-grants-requestGrant:
      description: Example request for grant payout
      summary: Request grant payout to a balance account
      value:
        counterparty:
          accountHolderId: AH00000000000000000000001
          balanceAccountId: BA00000000000000000000001
        grantAccountId: CG00000000000000000000001
        grantOfferId: "0000000000000001"
    post-grants-requestGrant-200:
      description: Example response for requesting grant payout
      summary: Grant payout requested
      value:
        amount:
          currency: EUR
          value: 1000000
        balances:
        - currency: EUR
          fee: 120000
          principal: 1000000
          total: 1120000
        counterparty:
          accountHolderId: AH00000000000000000000001
          balanceAccountId: BA00000000000000000000001
        fee:
          amount:
            currency: EUR
            value: 120000
        grantAccountId: CG00000000000000000000001
        grantOfferId: "0000000000000001"
        id: GR00000000000000000000001
        repayment:
          basisPoints: 1400
        status: Pending
  schemas:
    Amount:
      example:
        currency: currency
        value: 0
      properties:
        currency:
          description: "The three-character [ISO currency code](https://docs.adyen.com/development-resources/currency-codes)."
          maxLength: 3
          minLength: 3
          type: string
        value:
          description: "The amount of the transaction, in [minor units](https://docs.adyen.com/development-resources/currency-codes)."
          format: int64
          type: integer
      required:
      - currency
      - value
    CapitalBalance:
      example:
        principal: 1
        total: 5
        fee: 6
        currency: currency
      properties:
        currency:
          description: "The three-character [ISO currency code](https://docs.adyen.com/development-resources/currency-codes)."
          type: string
        fee:
          description: Fee amount.
          format: int64
          type: integer
        principal:
          description: Principal amount.
          format: int64
          type: integer
        total:
          description: Total amount. A sum of principal amount and fee amount.
          format: int64
          type: integer
      required:
      - currency
      - fee
      - principal
      - total
    CapitalGrant:
      example:
        grantAccountId: grantAccountId
        amount:
          currency: currency
          value: 0
        balances:
          principal: 1
          total: 5
          fee: 6
          currency: currency
        fee:
          amount:
            currency: currency
            value: 0
        grantOfferId: grantOfferId
        counterparty:
          balanceAccountId: balanceAccountId
          accountHolderId: accountHolderId
          transferInstrumentId: transferInstrumentId
        id: id
        repayment:
          basisPoints: 5
          term:
            estimatedDays: 2
            maximumDays: 7
          threshold:
            amount:
              currency: currency
              value: 0
        status: Pending
      properties:
        amount:
          $ref: '#/components/schemas/Amount'
        balances:
          $ref: '#/components/schemas/CapitalBalance'
        counterparty:
          $ref: '#/components/schemas/Counterparty'
        fee:
          $ref: '#/components/schemas/Fee'
        grantAccountId:
          description: The identifier of the grant account used for the grant.
          type: string
        grantOfferId:
          description: The identifier of the grant offer that has been selected and
            from which the grant details will be used.
          type: string
        id:
          description: The identifier of the grant reference.
          type: string
        repayment:
          $ref: '#/components/schemas/Repayment'
        status:
          description: "The current status of the grant. Possible values: **Pending**,\
            \ **Active**, **Repaid**."
          enum:
          - Pending
          - Active
          - Repaid
          type: string
      required:
      - balances
      - grantAccountId
      - grantOfferId
      - id
      - status
    CapitalGrantInfo:
      example:
        grantAccountId: grantAccountId
        grantOfferId: grantOfferId
        counterparty:
          balanceAccountId: balanceAccountId
          accountHolderId: accountHolderId
          transferInstrumentId: transferInstrumentId
      properties:
        counterparty:
          $ref: '#/components/schemas/Counterparty'
        grantAccountId:
          description: The identifier of the grant account used for the grant.
          type: string
        grantOfferId:
          description: The identifier of the grant offer that has been selected and
            from which the grant details will be used.
          type: string
      required:
      - grantAccountId
      - grantOfferId
    CapitalGrants:
      example:
        grants:
        - grantAccountId: grantAccountId
          amount:
            currency: currency
            value: 0
          balances:
            principal: 1
            total: 5
            fee: 6
            currency: currency
          fee:
            amount:
              currency: currency
              value: 0
          grantOfferId: grantOfferId
          counterparty:
            balanceAccountId: balanceAccountId
            accountHolderId: accountHolderId
            transferInstrumentId: transferInstrumentId
          id: id
          repayment:
            basisPoints: 5
            term:
              estimatedDays: 2
              maximumDays: 7
            threshold:
              amount:
                currency: currency
                value: 0
          status: Pending
        - grantAccountId: grantAccountId
          amount:
            currency: currency
            value: 0
          balances:
            principal: 1
            total: 5
            fee: 6
            currency: currency
          fee:
            amount:
              currency: currency
              value: 0
          grantOfferId: grantOfferId
          counterparty:
            balanceAccountId: balanceAccountId
            accountHolderId: accountHolderId
            transferInstrumentId: transferInstrumentId
          id: id
          repayment:
            basisPoints: 5
            term:
              estimatedDays: 2
              maximumDays: 7
            threshold:
              amount:
                currency: currency
                value: 0
          status: Pending
      properties:
        grants:
          description: The unique identifier of the grant.
          items:
            $ref: '#/components/schemas/CapitalGrant'
          type: array
      required:
      - grants
    Counterparty:
      example:
        balanceAccountId: balanceAccountId
        accountHolderId: accountHolderId
        transferInstrumentId: transferInstrumentId
      properties:
        accountHolderId:
          description: The identifier of the receiving account holder. The payout
            will default to the primary balance account of this account holder if
            no `balanceAccountId` is provided.
          type: string
        balanceAccountId:
          description: The identifier of the balance account that belongs to the receiving
            account holder.
          type: string
        transferInstrumentId:
          description: The identifier of the transfer instrument that belongs to the
            legal entity of the account holder.
          type: string
    Fee:
      example:
        amount:
          currency: currency
          value: 0
      properties:
        amount:
          $ref: '#/components/schemas/Amount'
      required:
      - amount
    InvalidField:
      example:
        name: name
        message: message
        value: value
      properties:
        message:
          description: Description of the validation error.
          type: string
        name:
          description: The field that has an invalid value.
          type: string
        value:
          description: The invalid value.
          type: string
      required:
      - message
      - name
      - value
    JSONObject:
      example:
        paths:
        - content:
          - content
          - content
        - content:
          - content
          - content
        rootPath:
          content:
          - content
          - content
      properties:
        paths:
          items:
            $ref: '#/components/schemas/JSONPath'
          type: array
        rootPath:
          $ref: '#/components/schemas/JSONPath'
    JSONPath:
      example:
        content:
        - content
        - content
      properties:
        content:
          items:
            type: string
          type: array
    Repayment:
      example:
        basisPoints: 5
        term:
          estimatedDays: 2
          maximumDays: 7
        threshold:
          amount:
            currency: currency
            value: 0
      properties:
        basisPoints:
          description: "The repayment that is deducted daily from incoming net volume,\
            \ in [basis points](https://www.investopedia.com/terms/b/basispoint.asp)."
          format: int32
          type: integer
        term:
          $ref: '#/components/schemas/RepaymentTerm'
        threshold:
          $ref: '#/components/schemas/ThresholdRepayment'
      required:
      - basisPoints
    RepaymentTerm:
      example:
        estimatedDays: 2
        maximumDays: 7
      properties:
        estimatedDays:
          description: "The estimated term for repaying the grant, in days."
          format: int32
          type: integer
        maximumDays:
          description: "The maximum term for repaying the grant, in days. Only applies\
            \ when `contractType` is **loan**."
          format: int32
          type: integer
      required:
      - estimatedDays
    RestServiceError:
      example:
        instance: instance
        invalidFields:
        - name: name
          message: message
          value: value
        - name: name
          message: message
          value: value
        requestId: requestId
        response:
          paths:
          - content:
            - content
            - content
          - content:
            - content
            - content
          rootPath:
            content:
            - content
            - content
        errorCode: errorCode
        detail: detail
        title: title
        type: type
        status: 9
      properties:
        detail:
          description: A human-readable explanation specific to this occurrence of
            the problem.
          type: string
        errorCode:
          description: A code that identifies the problem type.
          type: string
        instance:
          description: A unique URI that identifies the specific occurrence of the
            problem.
          type: string
        invalidFields:
          description: "Detailed explanation of each validation error, when applicable."
          items:
            $ref: '#/components/schemas/InvalidField'
          type: array
        requestId:
          description: "A unique reference for the request, essentially the same as\
            \ `pspReference`."
          type: string
        response:
          $ref: '#/components/schemas/JSONObject'
        status:
          description: The HTTP status code.
          format: int32
          type: integer
        title:
          description: "A short, human-readable summary of the problem type."
          type: string
        type:
          description: "A URI that identifies the problem type, pointing to human-readable\
            \ documentation on this problem type."
          type: string
      required:
      - detail
      - errorCode
      - status
      - title
      - type
    ThresholdRepayment:
      example:
        amount:
          currency: currency
          value: 0
      properties:
        amount:
          $ref: '#/components/schemas/Amount'
      required:
      - amount
  securitySchemes:
    ApiKeyAuth:
      in: header
      name: X-API-Key
      type: apiKey
    BasicAuth:
      scheme: basic
      type: http
x-groups:
- Capital

