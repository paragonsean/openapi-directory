/*
 * Fire Financial Services Business API
 * The fire.com API allows you to deeply integrate Business Account features into your application or back-office systems.  The API provides read access to your profile, accounts and transactions, event-driven notifications of activity on the account and payment initiation via batches. Each feature has its own HTTP endpoint and every endpoint has its own permission.   The API exposes 3 main areas of functionality: financial functions, service information and service configuration. ## Financial Functions These functions provide access to your account details, transactions, payee accounts, payment initiation etc. ## Service Functions These provide information about the fees and limits applied to your account. ## Service configuration These provide information about your service configs - applications, webhooks, API tokens, etc. 
 *
 * The version of the OpenAPI document: 1.0
 * Contact: api@fire.com
 *
 * NOTE: This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).
 * https://openapi-generator.tech
 * Do not edit the class manually.
 */


package org.openapitools.client.api;

import org.openapitools.client.ApiCallback;
import org.openapitools.client.ApiClient;
import org.openapitools.client.ApiException;
import org.openapitools.client.ApiResponse;
import org.openapitools.client.Configuration;
import org.openapitools.client.Pair;
import org.openapitools.client.ProgressRequestBody;
import org.openapitools.client.ProgressResponseBody;

import com.google.gson.reflect.TypeToken;

import java.io.IOException;


import org.openapitools.client.model.Aspsps;
import org.openapitools.client.model.NewPaymentRequest;
import org.openapitools.client.model.NewPaymentRequestResponse;
import org.openapitools.client.model.PaymentRequest;

import java.lang.reflect.Type;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

public class OpenBankingApi {
    private ApiClient localVarApiClient;
    private int localHostIndex;
    private String localCustomBaseUrl;

    public OpenBankingApi() {
        this(Configuration.getDefaultApiClient());
    }

    public OpenBankingApi(ApiClient apiClient) {
        this.localVarApiClient = apiClient;
    }

    public ApiClient getApiClient() {
        return localVarApiClient;
    }

    public void setApiClient(ApiClient apiClient) {
        this.localVarApiClient = apiClient;
    }

    public int getHostIndex() {
        return localHostIndex;
    }

    public void setHostIndex(int hostIndex) {
        this.localHostIndex = hostIndex;
    }

    public String getCustomBaseUrl() {
        return localCustomBaseUrl;
    }

    public void setCustomBaseUrl(String customBaseUrl) {
        this.localCustomBaseUrl = customBaseUrl;
    }

    /**
     * Build call for getListOfAspsps
     * @param currency The three letter code for the currency - either &#x60;EUR&#x60; or &#x60;GBP&#x60;. Use this to filter the list for banks that can be used to pay in a certain currency. (optional)
     * @param _callback Callback for upload/download progress
     * @return Call to execute
     * @throws ApiException If fail to serialize the request body object
     * @http.response.details
     <table summary="Response Details" border="1">
        <tr><td> Status Code </td><td> Description </td><td> Response Headers </td></tr>
        <tr><td> 200 </td><td> A list of ASPSPs the customers can use to pay a payment.  </td><td>  -  </td></tr>
     </table>
     */
    public okhttp3.Call getListOfAspspsCall(String currency, final ApiCallback _callback) throws ApiException {
        String basePath = null;
        // Operation Servers
        String[] localBasePaths = new String[] {  };

        // Determine Base Path to Use
        if (localCustomBaseUrl != null){
            basePath = localCustomBaseUrl;
        } else if ( localBasePaths.length > 0 ) {
            basePath = localBasePaths[localHostIndex];
        } else {
            basePath = null;
        }

        Object localVarPostBody = null;

        // create path and map variables
        String localVarPath = "/v1/aspsps";

        List<Pair> localVarQueryParams = new ArrayList<Pair>();
        List<Pair> localVarCollectionQueryParams = new ArrayList<Pair>();
        Map<String, String> localVarHeaderParams = new HashMap<String, String>();
        Map<String, String> localVarCookieParams = new HashMap<String, String>();
        Map<String, Object> localVarFormParams = new HashMap<String, Object>();

        if (currency != null) {
            localVarQueryParams.addAll(localVarApiClient.parameterToPair("currency", currency));
        }

        final String[] localVarAccepts = {
            "application/json"
        };
        final String localVarAccept = localVarApiClient.selectHeaderAccept(localVarAccepts);
        if (localVarAccept != null) {
            localVarHeaderParams.put("Accept", localVarAccept);
        }

        final String[] localVarContentTypes = {
        };
        final String localVarContentType = localVarApiClient.selectHeaderContentType(localVarContentTypes);
        if (localVarContentType != null) {
            localVarHeaderParams.put("Content-Type", localVarContentType);
        }

        String[] localVarAuthNames = new String[] { "bearerAuth" };
        return localVarApiClient.buildCall(basePath, localVarPath, "GET", localVarQueryParams, localVarCollectionQueryParams, localVarPostBody, localVarHeaderParams, localVarCookieParams, localVarFormParams, localVarAuthNames, _callback);
    }

    @SuppressWarnings("rawtypes")
    private okhttp3.Call getListOfAspspsValidateBeforeCall(String currency, final ApiCallback _callback) throws ApiException {
        return getListOfAspspsCall(currency, _callback);

    }

    /**
     * Get list of ASPSPs / Banks
     * Returns all ASPSPs (Account Servicing Payment Service Provider) / banks. The list can be filtered by currency. You will need to enable the &#x60;PERM_BUSINESS_GET_ASPSPS&#x60; permission to use this endpoint. ***This endpoint is only required if you intend to host the “Select ASPSP / bank” page yourself.*** 
     * @param currency The three letter code for the currency - either &#x60;EUR&#x60; or &#x60;GBP&#x60;. Use this to filter the list for banks that can be used to pay in a certain currency. (optional)
     * @return Aspsps
     * @throws ApiException If fail to call the API, e.g. server error or cannot deserialize the response body
     * @http.response.details
     <table summary="Response Details" border="1">
        <tr><td> Status Code </td><td> Description </td><td> Response Headers </td></tr>
        <tr><td> 200 </td><td> A list of ASPSPs the customers can use to pay a payment.  </td><td>  -  </td></tr>
     </table>
     */
    public Aspsps getListOfAspsps(String currency) throws ApiException {
        ApiResponse<Aspsps> localVarResp = getListOfAspspsWithHttpInfo(currency);
        return localVarResp.getData();
    }

    /**
     * Get list of ASPSPs / Banks
     * Returns all ASPSPs (Account Servicing Payment Service Provider) / banks. The list can be filtered by currency. You will need to enable the &#x60;PERM_BUSINESS_GET_ASPSPS&#x60; permission to use this endpoint. ***This endpoint is only required if you intend to host the “Select ASPSP / bank” page yourself.*** 
     * @param currency The three letter code for the currency - either &#x60;EUR&#x60; or &#x60;GBP&#x60;. Use this to filter the list for banks that can be used to pay in a certain currency. (optional)
     * @return ApiResponse&lt;Aspsps&gt;
     * @throws ApiException If fail to call the API, e.g. server error or cannot deserialize the response body
     * @http.response.details
     <table summary="Response Details" border="1">
        <tr><td> Status Code </td><td> Description </td><td> Response Headers </td></tr>
        <tr><td> 200 </td><td> A list of ASPSPs the customers can use to pay a payment.  </td><td>  -  </td></tr>
     </table>
     */
    public ApiResponse<Aspsps> getListOfAspspsWithHttpInfo(String currency) throws ApiException {
        okhttp3.Call localVarCall = getListOfAspspsValidateBeforeCall(currency, null);
        Type localVarReturnType = new TypeToken<Aspsps>(){}.getType();
        return localVarApiClient.execute(localVarCall, localVarReturnType);
    }

    /**
     * Get list of ASPSPs / Banks (asynchronously)
     * Returns all ASPSPs (Account Servicing Payment Service Provider) / banks. The list can be filtered by currency. You will need to enable the &#x60;PERM_BUSINESS_GET_ASPSPS&#x60; permission to use this endpoint. ***This endpoint is only required if you intend to host the “Select ASPSP / bank” page yourself.*** 
     * @param currency The three letter code for the currency - either &#x60;EUR&#x60; or &#x60;GBP&#x60;. Use this to filter the list for banks that can be used to pay in a certain currency. (optional)
     * @param _callback The callback to be executed when the API call finishes
     * @return The request call
     * @throws ApiException If fail to process the API call, e.g. serializing the request body object
     * @http.response.details
     <table summary="Response Details" border="1">
        <tr><td> Status Code </td><td> Description </td><td> Response Headers </td></tr>
        <tr><td> 200 </td><td> A list of ASPSPs the customers can use to pay a payment.  </td><td>  -  </td></tr>
     </table>
     */
    public okhttp3.Call getListOfAspspsAsync(String currency, final ApiCallback<Aspsps> _callback) throws ApiException {

        okhttp3.Call localVarCall = getListOfAspspsValidateBeforeCall(currency, _callback);
        Type localVarReturnType = new TypeToken<Aspsps>(){}.getType();
        localVarApiClient.executeAsync(localVarCall, localVarReturnType, _callback);
        return localVarCall;
    }
    /**
     * Build call for getPaymentDetails
     * @param paymentUuid  (required)
     * @param _callback Callback for upload/download progress
     * @return Call to execute
     * @throws ApiException If fail to serialize the request body object
     * @http.response.details
     <table summary="Response Details" border="1">
        <tr><td> Status Code </td><td> Description </td><td> Response Headers </td></tr>
        <tr><td> 200 </td><td> The Payment Request details object </td><td>  -  </td></tr>
     </table>
     */
    public okhttp3.Call getPaymentDetailsCall(String paymentUuid, final ApiCallback _callback) throws ApiException {
        String basePath = null;
        // Operation Servers
        String[] localBasePaths = new String[] {  };

        // Determine Base Path to Use
        if (localCustomBaseUrl != null){
            basePath = localCustomBaseUrl;
        } else if ( localBasePaths.length > 0 ) {
            basePath = localBasePaths[localHostIndex];
        } else {
            basePath = null;
        }

        Object localVarPostBody = null;

        // create path and map variables
        String localVarPath = "/v1/payments/{paymentUuid}"
            .replace("{" + "paymentUuid" + "}", localVarApiClient.escapeString(paymentUuid.toString()));

        List<Pair> localVarQueryParams = new ArrayList<Pair>();
        List<Pair> localVarCollectionQueryParams = new ArrayList<Pair>();
        Map<String, String> localVarHeaderParams = new HashMap<String, String>();
        Map<String, String> localVarCookieParams = new HashMap<String, String>();
        Map<String, Object> localVarFormParams = new HashMap<String, Object>();

        final String[] localVarAccepts = {
            "application/json"
        };
        final String localVarAccept = localVarApiClient.selectHeaderAccept(localVarAccepts);
        if (localVarAccept != null) {
            localVarHeaderParams.put("Accept", localVarAccept);
        }

        final String[] localVarContentTypes = {
        };
        final String localVarContentType = localVarApiClient.selectHeaderContentType(localVarContentTypes);
        if (localVarContentType != null) {
            localVarHeaderParams.put("Content-Type", localVarContentType);
        }

        String[] localVarAuthNames = new String[] { "bearerAuth" };
        return localVarApiClient.buildCall(basePath, localVarPath, "GET", localVarQueryParams, localVarCollectionQueryParams, localVarPostBody, localVarHeaderParams, localVarCookieParams, localVarFormParams, localVarAuthNames, _callback);
    }

    @SuppressWarnings("rawtypes")
    private okhttp3.Call getPaymentDetailsValidateBeforeCall(String paymentUuid, final ApiCallback _callback) throws ApiException {
        // verify the required parameter 'paymentUuid' is set
        if (paymentUuid == null) {
            throw new ApiException("Missing the required parameter 'paymentUuid' when calling getPaymentDetails(Async)");
        }

        return getPaymentDetailsCall(paymentUuid, _callback);

    }

    /**
     * Get Payment Details
     * Returns the details of a specific payment.  As the customer goes through the process of making the payment the status of the payment will change.  * &#x60;AWAITING_AUTHORISATION&#x60; -This is the initial status of all your payments. * &#x60;AUTHORISED&#x60; - This is the status that your payment is set to after the customer has authorised the payment with their ASPSP / bank. * &#x60;AWAITING_MULTI_AUTHORISATION&#x60; - Some business accounts such as charities require dual authorisation. * &#x60;NOT_AUTHORISED&#x60; - Either your customer clicked on cancel or the payment was rejected by their ASPSP / bank. * &#x60;PENDING&#x60; - This is the status that your payment is set to after the customer has authorised the payment with their ASPSP / bank but the bank may want to carry out another check before funding the transaction. * &#x60;PAID&#x60; - Funds were received into your fire.com GBP or EUR account from your customer’s ASPSP / bank.   You will need to enable the &#x60;PERM_BUSINESS_GET_PAYMENT&#x60; permission to use this endpoint. 
     * @param paymentUuid  (required)
     * @return PaymentRequest
     * @throws ApiException If fail to call the API, e.g. server error or cannot deserialize the response body
     * @http.response.details
     <table summary="Response Details" border="1">
        <tr><td> Status Code </td><td> Description </td><td> Response Headers </td></tr>
        <tr><td> 200 </td><td> The Payment Request details object </td><td>  -  </td></tr>
     </table>
     */
    public PaymentRequest getPaymentDetails(String paymentUuid) throws ApiException {
        ApiResponse<PaymentRequest> localVarResp = getPaymentDetailsWithHttpInfo(paymentUuid);
        return localVarResp.getData();
    }

    /**
     * Get Payment Details
     * Returns the details of a specific payment.  As the customer goes through the process of making the payment the status of the payment will change.  * &#x60;AWAITING_AUTHORISATION&#x60; -This is the initial status of all your payments. * &#x60;AUTHORISED&#x60; - This is the status that your payment is set to after the customer has authorised the payment with their ASPSP / bank. * &#x60;AWAITING_MULTI_AUTHORISATION&#x60; - Some business accounts such as charities require dual authorisation. * &#x60;NOT_AUTHORISED&#x60; - Either your customer clicked on cancel or the payment was rejected by their ASPSP / bank. * &#x60;PENDING&#x60; - This is the status that your payment is set to after the customer has authorised the payment with their ASPSP / bank but the bank may want to carry out another check before funding the transaction. * &#x60;PAID&#x60; - Funds were received into your fire.com GBP or EUR account from your customer’s ASPSP / bank.   You will need to enable the &#x60;PERM_BUSINESS_GET_PAYMENT&#x60; permission to use this endpoint. 
     * @param paymentUuid  (required)
     * @return ApiResponse&lt;PaymentRequest&gt;
     * @throws ApiException If fail to call the API, e.g. server error or cannot deserialize the response body
     * @http.response.details
     <table summary="Response Details" border="1">
        <tr><td> Status Code </td><td> Description </td><td> Response Headers </td></tr>
        <tr><td> 200 </td><td> The Payment Request details object </td><td>  -  </td></tr>
     </table>
     */
    public ApiResponse<PaymentRequest> getPaymentDetailsWithHttpInfo(String paymentUuid) throws ApiException {
        okhttp3.Call localVarCall = getPaymentDetailsValidateBeforeCall(paymentUuid, null);
        Type localVarReturnType = new TypeToken<PaymentRequest>(){}.getType();
        return localVarApiClient.execute(localVarCall, localVarReturnType);
    }

    /**
     * Get Payment Details (asynchronously)
     * Returns the details of a specific payment.  As the customer goes through the process of making the payment the status of the payment will change.  * &#x60;AWAITING_AUTHORISATION&#x60; -This is the initial status of all your payments. * &#x60;AUTHORISED&#x60; - This is the status that your payment is set to after the customer has authorised the payment with their ASPSP / bank. * &#x60;AWAITING_MULTI_AUTHORISATION&#x60; - Some business accounts such as charities require dual authorisation. * &#x60;NOT_AUTHORISED&#x60; - Either your customer clicked on cancel or the payment was rejected by their ASPSP / bank. * &#x60;PENDING&#x60; - This is the status that your payment is set to after the customer has authorised the payment with their ASPSP / bank but the bank may want to carry out another check before funding the transaction. * &#x60;PAID&#x60; - Funds were received into your fire.com GBP or EUR account from your customer’s ASPSP / bank.   You will need to enable the &#x60;PERM_BUSINESS_GET_PAYMENT&#x60; permission to use this endpoint. 
     * @param paymentUuid  (required)
     * @param _callback The callback to be executed when the API call finishes
     * @return The request call
     * @throws ApiException If fail to process the API call, e.g. serializing the request body object
     * @http.response.details
     <table summary="Response Details" border="1">
        <tr><td> Status Code </td><td> Description </td><td> Response Headers </td></tr>
        <tr><td> 200 </td><td> The Payment Request details object </td><td>  -  </td></tr>
     </table>
     */
    public okhttp3.Call getPaymentDetailsAsync(String paymentUuid, final ApiCallback<PaymentRequest> _callback) throws ApiException {

        okhttp3.Call localVarCall = getPaymentDetailsValidateBeforeCall(paymentUuid, _callback);
        Type localVarReturnType = new TypeToken<PaymentRequest>(){}.getType();
        localVarApiClient.executeAsync(localVarCall, localVarReturnType, _callback);
        return localVarCall;
    }
    /**
     * Build call for newPaymentRequest
     * @param newPaymentRequest Details of the new payment request (required)
     * @param _callback Callback for upload/download progress
     * @return Call to execute
     * @throws ApiException If fail to serialize the request body object
     * @http.response.details
     <table summary="Response Details" border="1">
        <tr><td> Status Code </td><td> Description </td><td> Response Headers </td></tr>
        <tr><td> 200 </td><td> Payment Request created successfully </td><td>  -  </td></tr>
     </table>
     */
    public okhttp3.Call newPaymentRequestCall(NewPaymentRequest newPaymentRequest, final ApiCallback _callback) throws ApiException {
        String basePath = null;
        // Operation Servers
        String[] localBasePaths = new String[] {  };

        // Determine Base Path to Use
        if (localCustomBaseUrl != null){
            basePath = localCustomBaseUrl;
        } else if ( localBasePaths.length > 0 ) {
            basePath = localBasePaths[localHostIndex];
        } else {
            basePath = null;
        }

        Object localVarPostBody = newPaymentRequest;

        // create path and map variables
        String localVarPath = "/v1/paymentrequests";

        List<Pair> localVarQueryParams = new ArrayList<Pair>();
        List<Pair> localVarCollectionQueryParams = new ArrayList<Pair>();
        Map<String, String> localVarHeaderParams = new HashMap<String, String>();
        Map<String, String> localVarCookieParams = new HashMap<String, String>();
        Map<String, Object> localVarFormParams = new HashMap<String, Object>();

        final String[] localVarAccepts = {
            "application/json"
        };
        final String localVarAccept = localVarApiClient.selectHeaderAccept(localVarAccepts);
        if (localVarAccept != null) {
            localVarHeaderParams.put("Accept", localVarAccept);
        }

        final String[] localVarContentTypes = {
            "application/json"
        };
        final String localVarContentType = localVarApiClient.selectHeaderContentType(localVarContentTypes);
        if (localVarContentType != null) {
            localVarHeaderParams.put("Content-Type", localVarContentType);
        }

        String[] localVarAuthNames = new String[] { "bearerAuth" };
        return localVarApiClient.buildCall(basePath, localVarPath, "POST", localVarQueryParams, localVarCollectionQueryParams, localVarPostBody, localVarHeaderParams, localVarCookieParams, localVarFormParams, localVarAuthNames, _callback);
    }

    @SuppressWarnings("rawtypes")
    private okhttp3.Call newPaymentRequestValidateBeforeCall(NewPaymentRequest newPaymentRequest, final ApiCallback _callback) throws ApiException {
        // verify the required parameter 'newPaymentRequest' is set
        if (newPaymentRequest == null) {
            throw new ApiException("Missing the required parameter 'newPaymentRequest' when calling newPaymentRequest(Async)");
        }

        return newPaymentRequestCall(newPaymentRequest, _callback);

    }

    /**
     * Create a Fire Open Payment request
     * Fire Open Payments is a feature of the fire.com business account that leverages Open Banking to allow your customers to pay you via bank transfer and to reconcile those payments as they are received into your fire.com GBP or EUR account.  To set up each Fire Open Payment you first need to create a payment request. This contains the details of the payment such as the amount, destination account, description as well as various other specific fields that you want to associate with the payment. The payment request is represented as a URL with a unique code which can then be incorporated into an eCommerce shopping cart as an alternative form of payment. For example, you can put “Pay by Bank” on your website along with “Pay by Card” and “Pay by PayPal”. It can also be distributed by a variety of means such as by email, SMS, WhatsApp, encoded as a QR code, NFC tag, etc.  Consumers confirm the payment details such as the amount are correct, select their bank and authorise the payment. Payments can be made from all major UK banks.  The funds are settled into your fire.com account, fully reconciled, with your specified fields provided.  There are two implementation options you can use to display payment pages with Fire Open Payments. 1. **Hosted Payment Pages:** fire.com hosts the payment pages - this option allows you to re-direct your customer to the hosted fire.com payment pages displaying the payment details confirmation, bank selection, consent and response pages. 2. **Integrated Payment Pages:** You host the payments page yourself - this option allows you to have control of the UI and UX for displaying the payment details confirmation, bank selection and response pages. Once the response is received, fire.com can re-direct the payer back to your website.  ## Hosted Payment Pages Option ![Image](https://fire.com/docs/images/fop-hosted-flow.png)  The payer is brought through 5 stages to complete the payment: 1. **View Payment Details page:** The payer must first be clear on the amount of the payment, who they are paying and the reason for the payment. 2. **Select Bank / Account Provider page:** The payer then selects their bank. Again this step is offered as part of the fire.com payment UI. 3. **Consent page:**  The payer must provide consent to the PISP (fire.com) prior to authorising the payment. This is a regulatory requirement, this page must be hosted by fire.com. 4. **Authenticate and Authorise Payment:** The payer will be redirected to their bank’s online site or mobile banking app. After authenticating, the details of the payment will be displayed, and the payer will authorise the payment. 5. **Response page:** It is a regulatory requirement that the PISP (fire.com) display the results of the payment and provide the same information that would be provided if the payer had made the payment via their banking application. fire.com must display this page, before optionally redirecting the payer back to your website.  To implement the hosted Fire Open Payments option you need to do the following: 1. You can create a new Fire Open Payment request either within Firework Online or via the API. 2. Create your new API application with the appropriate permissions required in Firework Online, as outlined in the “Authentication” steps. The permissions needed are:     - “Create a Payment Request”     - “Get Payment Details”  3. Use the Refresh Token, Client ID and Client Key to create an access token as outlined in the “Authentication” steps. 4. On your website, create a “Pay by Bank” button alongside your other available payment methods, such as Cards and PayPal. 5. After the user clicks on “Pay by Bank”, you need to create a new Fire Open Payment request as outlined in the “Create a Fire Open Payment” steps. The Create a Fire Open Payment request endpoint returns a unique code for the payment request. 6. Create a URL using the code returned in this format: &#x60;https://payments.fire.com/{code}&#x60; and redirect your customer to this page. 7. fire.com will host all the pages that the customer needs to review and authorise the payment. fire.com will will return the paymentUUID of the successful or failed transaction to the returnUrl that you supplied when creating the Fire Open Payment request. fire.com can also optionally send a “webhook” to your website notifying you of the transaction’s outcome. 8. Once fire.com responds with the paymentUUID and/or the webhook to your website, you need to call the “Get Payment Details” endpoint to get the details of the transaction. This will let you know whether the transaction was successful or not. You can set up the “Payment Request Payment Authorised” webhook to notify you once the payment is authorised or cancelled. 9. The funds will be received into your GBP or EUR account. Funding will typically be within 6 business hours.  Once the code is returned the payment can be viewed and paid by going to the following URL: &#x60;https://payments.fire.com/{code}&#x60;  This request creates a new Fire Open Payment Payment. A code is returned that can be shared to your customers as a URL by any channel you wish. You will need to enable the &#x60;PERM_BUSINESS_POST_PAYMENT_REQUEST&#x60; permission to use this endpoint. 
     * @param newPaymentRequest Details of the new payment request (required)
     * @return NewPaymentRequestResponse
     * @throws ApiException If fail to call the API, e.g. server error or cannot deserialize the response body
     * @http.response.details
     <table summary="Response Details" border="1">
        <tr><td> Status Code </td><td> Description </td><td> Response Headers </td></tr>
        <tr><td> 200 </td><td> Payment Request created successfully </td><td>  -  </td></tr>
     </table>
     */
    public NewPaymentRequestResponse newPaymentRequest(NewPaymentRequest newPaymentRequest) throws ApiException {
        ApiResponse<NewPaymentRequestResponse> localVarResp = newPaymentRequestWithHttpInfo(newPaymentRequest);
        return localVarResp.getData();
    }

    /**
     * Create a Fire Open Payment request
     * Fire Open Payments is a feature of the fire.com business account that leverages Open Banking to allow your customers to pay you via bank transfer and to reconcile those payments as they are received into your fire.com GBP or EUR account.  To set up each Fire Open Payment you first need to create a payment request. This contains the details of the payment such as the amount, destination account, description as well as various other specific fields that you want to associate with the payment. The payment request is represented as a URL with a unique code which can then be incorporated into an eCommerce shopping cart as an alternative form of payment. For example, you can put “Pay by Bank” on your website along with “Pay by Card” and “Pay by PayPal”. It can also be distributed by a variety of means such as by email, SMS, WhatsApp, encoded as a QR code, NFC tag, etc.  Consumers confirm the payment details such as the amount are correct, select their bank and authorise the payment. Payments can be made from all major UK banks.  The funds are settled into your fire.com account, fully reconciled, with your specified fields provided.  There are two implementation options you can use to display payment pages with Fire Open Payments. 1. **Hosted Payment Pages:** fire.com hosts the payment pages - this option allows you to re-direct your customer to the hosted fire.com payment pages displaying the payment details confirmation, bank selection, consent and response pages. 2. **Integrated Payment Pages:** You host the payments page yourself - this option allows you to have control of the UI and UX for displaying the payment details confirmation, bank selection and response pages. Once the response is received, fire.com can re-direct the payer back to your website.  ## Hosted Payment Pages Option ![Image](https://fire.com/docs/images/fop-hosted-flow.png)  The payer is brought through 5 stages to complete the payment: 1. **View Payment Details page:** The payer must first be clear on the amount of the payment, who they are paying and the reason for the payment. 2. **Select Bank / Account Provider page:** The payer then selects their bank. Again this step is offered as part of the fire.com payment UI. 3. **Consent page:**  The payer must provide consent to the PISP (fire.com) prior to authorising the payment. This is a regulatory requirement, this page must be hosted by fire.com. 4. **Authenticate and Authorise Payment:** The payer will be redirected to their bank’s online site or mobile banking app. After authenticating, the details of the payment will be displayed, and the payer will authorise the payment. 5. **Response page:** It is a regulatory requirement that the PISP (fire.com) display the results of the payment and provide the same information that would be provided if the payer had made the payment via their banking application. fire.com must display this page, before optionally redirecting the payer back to your website.  To implement the hosted Fire Open Payments option you need to do the following: 1. You can create a new Fire Open Payment request either within Firework Online or via the API. 2. Create your new API application with the appropriate permissions required in Firework Online, as outlined in the “Authentication” steps. The permissions needed are:     - “Create a Payment Request”     - “Get Payment Details”  3. Use the Refresh Token, Client ID and Client Key to create an access token as outlined in the “Authentication” steps. 4. On your website, create a “Pay by Bank” button alongside your other available payment methods, such as Cards and PayPal. 5. After the user clicks on “Pay by Bank”, you need to create a new Fire Open Payment request as outlined in the “Create a Fire Open Payment” steps. The Create a Fire Open Payment request endpoint returns a unique code for the payment request. 6. Create a URL using the code returned in this format: &#x60;https://payments.fire.com/{code}&#x60; and redirect your customer to this page. 7. fire.com will host all the pages that the customer needs to review and authorise the payment. fire.com will will return the paymentUUID of the successful or failed transaction to the returnUrl that you supplied when creating the Fire Open Payment request. fire.com can also optionally send a “webhook” to your website notifying you of the transaction’s outcome. 8. Once fire.com responds with the paymentUUID and/or the webhook to your website, you need to call the “Get Payment Details” endpoint to get the details of the transaction. This will let you know whether the transaction was successful or not. You can set up the “Payment Request Payment Authorised” webhook to notify you once the payment is authorised or cancelled. 9. The funds will be received into your GBP or EUR account. Funding will typically be within 6 business hours.  Once the code is returned the payment can be viewed and paid by going to the following URL: &#x60;https://payments.fire.com/{code}&#x60;  This request creates a new Fire Open Payment Payment. A code is returned that can be shared to your customers as a URL by any channel you wish. You will need to enable the &#x60;PERM_BUSINESS_POST_PAYMENT_REQUEST&#x60; permission to use this endpoint. 
     * @param newPaymentRequest Details of the new payment request (required)
     * @return ApiResponse&lt;NewPaymentRequestResponse&gt;
     * @throws ApiException If fail to call the API, e.g. server error or cannot deserialize the response body
     * @http.response.details
     <table summary="Response Details" border="1">
        <tr><td> Status Code </td><td> Description </td><td> Response Headers </td></tr>
        <tr><td> 200 </td><td> Payment Request created successfully </td><td>  -  </td></tr>
     </table>
     */
    public ApiResponse<NewPaymentRequestResponse> newPaymentRequestWithHttpInfo(NewPaymentRequest newPaymentRequest) throws ApiException {
        okhttp3.Call localVarCall = newPaymentRequestValidateBeforeCall(newPaymentRequest, null);
        Type localVarReturnType = new TypeToken<NewPaymentRequestResponse>(){}.getType();
        return localVarApiClient.execute(localVarCall, localVarReturnType);
    }

    /**
     * Create a Fire Open Payment request (asynchronously)
     * Fire Open Payments is a feature of the fire.com business account that leverages Open Banking to allow your customers to pay you via bank transfer and to reconcile those payments as they are received into your fire.com GBP or EUR account.  To set up each Fire Open Payment you first need to create a payment request. This contains the details of the payment such as the amount, destination account, description as well as various other specific fields that you want to associate with the payment. The payment request is represented as a URL with a unique code which can then be incorporated into an eCommerce shopping cart as an alternative form of payment. For example, you can put “Pay by Bank” on your website along with “Pay by Card” and “Pay by PayPal”. It can also be distributed by a variety of means such as by email, SMS, WhatsApp, encoded as a QR code, NFC tag, etc.  Consumers confirm the payment details such as the amount are correct, select their bank and authorise the payment. Payments can be made from all major UK banks.  The funds are settled into your fire.com account, fully reconciled, with your specified fields provided.  There are two implementation options you can use to display payment pages with Fire Open Payments. 1. **Hosted Payment Pages:** fire.com hosts the payment pages - this option allows you to re-direct your customer to the hosted fire.com payment pages displaying the payment details confirmation, bank selection, consent and response pages. 2. **Integrated Payment Pages:** You host the payments page yourself - this option allows you to have control of the UI and UX for displaying the payment details confirmation, bank selection and response pages. Once the response is received, fire.com can re-direct the payer back to your website.  ## Hosted Payment Pages Option ![Image](https://fire.com/docs/images/fop-hosted-flow.png)  The payer is brought through 5 stages to complete the payment: 1. **View Payment Details page:** The payer must first be clear on the amount of the payment, who they are paying and the reason for the payment. 2. **Select Bank / Account Provider page:** The payer then selects their bank. Again this step is offered as part of the fire.com payment UI. 3. **Consent page:**  The payer must provide consent to the PISP (fire.com) prior to authorising the payment. This is a regulatory requirement, this page must be hosted by fire.com. 4. **Authenticate and Authorise Payment:** The payer will be redirected to their bank’s online site or mobile banking app. After authenticating, the details of the payment will be displayed, and the payer will authorise the payment. 5. **Response page:** It is a regulatory requirement that the PISP (fire.com) display the results of the payment and provide the same information that would be provided if the payer had made the payment via their banking application. fire.com must display this page, before optionally redirecting the payer back to your website.  To implement the hosted Fire Open Payments option you need to do the following: 1. You can create a new Fire Open Payment request either within Firework Online or via the API. 2. Create your new API application with the appropriate permissions required in Firework Online, as outlined in the “Authentication” steps. The permissions needed are:     - “Create a Payment Request”     - “Get Payment Details”  3. Use the Refresh Token, Client ID and Client Key to create an access token as outlined in the “Authentication” steps. 4. On your website, create a “Pay by Bank” button alongside your other available payment methods, such as Cards and PayPal. 5. After the user clicks on “Pay by Bank”, you need to create a new Fire Open Payment request as outlined in the “Create a Fire Open Payment” steps. The Create a Fire Open Payment request endpoint returns a unique code for the payment request. 6. Create a URL using the code returned in this format: &#x60;https://payments.fire.com/{code}&#x60; and redirect your customer to this page. 7. fire.com will host all the pages that the customer needs to review and authorise the payment. fire.com will will return the paymentUUID of the successful or failed transaction to the returnUrl that you supplied when creating the Fire Open Payment request. fire.com can also optionally send a “webhook” to your website notifying you of the transaction’s outcome. 8. Once fire.com responds with the paymentUUID and/or the webhook to your website, you need to call the “Get Payment Details” endpoint to get the details of the transaction. This will let you know whether the transaction was successful or not. You can set up the “Payment Request Payment Authorised” webhook to notify you once the payment is authorised or cancelled. 9. The funds will be received into your GBP or EUR account. Funding will typically be within 6 business hours.  Once the code is returned the payment can be viewed and paid by going to the following URL: &#x60;https://payments.fire.com/{code}&#x60;  This request creates a new Fire Open Payment Payment. A code is returned that can be shared to your customers as a URL by any channel you wish. You will need to enable the &#x60;PERM_BUSINESS_POST_PAYMENT_REQUEST&#x60; permission to use this endpoint. 
     * @param newPaymentRequest Details of the new payment request (required)
     * @param _callback The callback to be executed when the API call finishes
     * @return The request call
     * @throws ApiException If fail to process the API call, e.g. serializing the request body object
     * @http.response.details
     <table summary="Response Details" border="1">
        <tr><td> Status Code </td><td> Description </td><td> Response Headers </td></tr>
        <tr><td> 200 </td><td> Payment Request created successfully </td><td>  -  </td></tr>
     </table>
     */
    public okhttp3.Call newPaymentRequestAsync(NewPaymentRequest newPaymentRequest, final ApiCallback<NewPaymentRequestResponse> _callback) throws ApiException {

        okhttp3.Call localVarCall = newPaymentRequestValidateBeforeCall(newPaymentRequest, _callback);
        Type localVarReturnType = new TypeToken<NewPaymentRequestResponse>(){}.getType();
        localVarApiClient.executeAsync(localVarCall, localVarReturnType, _callback);
        return localVarCall;
    }
}
